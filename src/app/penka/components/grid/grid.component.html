<app-page-header [title]="title"></app-page-header>

<!-- DESKTOP -->
<div class="desktop">
    <div class="container">
        <br>
        <app-back-space></app-back-space>
        <br>
        <div class="row">
            <div class="col-lg-12">
                <div class="box">
                    <mat-card class="card-participants">

                        <mat-card-header class="card-header">
                            <ng-container *ngIf="gambles">
                                <ul class="header-table">
                                    <li class="header-participants">&nbsp;</li>
                                    <li class="header-scores">
                                        <p class="header-font">Puntos</p>
                                    </li>
                                    <li class="header-matches" *ngFor="let g of gambles | filterUserId:user.uid">
                                        <ng-container
                                            *ngFor="let sm of singleMatches | filterId:g.singleMatchId; let i = index">
                                            <ng-container *ngIf="i === 0">
                                                <p class="header-font">{{sm.homeTeamAlias}} &nbsp; -
                                                    &nbsp; {{sm.visitTeamAlias}}</p>
                                                <p class="score-font">{{sm.homeTeamScore}} &nbsp; -
                                                    &nbsp; {{sm.visitTeamScore}}</p>
                                            </ng-container>
                                        </ng-container>
                                    </li>
                                </ul>
                            </ng-container>
                        </mat-card-header>


                        <mat-card-content class="card-content">
                            <ul class="list-participants">
                                <li class="item-participants"
                                    *ngFor="let part of participants; let i = index">

                                    <ng-container *ngIf="part.userId === user.uid; else other">
                                        <div class="participant-name">
                                            <p class="me">{{i + 1}}.&nbsp;{{part.userName}}</p>
                                        </div>
                                        <div class="participant-score">
                                            <p class="me">{{part.accumulatedScore}} pt</p>
                                        </div>
                                    </ng-container>

                                    <ng-template #other>
                                        <div class="participant-name">
                                            <p>{{i + 1}}.&nbsp;{{part.userName}}</p>
                                        </div>
                                        <div class="participant-score">
                                            <p>{{part.accumulatedScore}} pt</p>
                                        </div>
                                    </ng-template>

                                    <div>
                                        <ul class="list-gamble">
                                            <li class="item-gamble"
                                                *ngFor="let ga of gambles | filterUserId:part.userId; let x = index">

                                                <!-- My Gambles -->
                                                <ng-container *ngIf="ga.userId === user.uid; else guess">
                                                    <ng-container *ngIf="ga.penkaFormat === 'PRO'">

                                                        <ng-container *ngIf="ga.homeTeamScore; else noScoreYet">
                                                            <p class="header-font">{{ga.homeTeamScore}}
                                                                - {{ga.visitTeamScore}}</p>
                                                            <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                        </ng-container>

                                                        <ng-template #noScoreYet>
                                                            <p class="header-font">-</p>
                                                        </ng-template>
                                                    </ng-container>

                                                    <ng-container *ngIf="ga.penkaFormat === 'MEDIUM'">
                                                        <ng-container
                                                            *ngIf="ga.winnerTeamId || ga.draw; else noScoreYet">
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.homeTeamId">
                                                                <p class="header-font">L</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.visitTeamId">
                                                                <p class="header-font">V</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.draw === true">
                                                                <p class="header-font">E</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-template #noScoreYet>
                                                            <p class="header-font">-</p>
                                                        </ng-template>


                                                    </ng-container>
                                                </ng-container>

                                                <!-- Other Players Gambles -->
                                                <ng-template #guess>
                                                    <ng-container *ngIf="ga.penkaFormat === 'PRO'">

                                                        <ng-container *ngIf="ga.startDate === date">
                                                            <ng-container *ngIf="ga.startTime <= time;">
                                                                <p class="header-font">{{ga.homeTeamScore}}
                                                                    - {{ga.visitTeamScore}}</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.startTime > time;">
                                                                <p class="header-font">-</p>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-container *ngIf="ga.startDate < date">
                                                            <p class="header-font">{{ga.homeTeamScore}}
                                                                - {{ga.visitTeamScore}}</p>
                                                            <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                        </ng-container>

                                                        <ng-container *ngIf="ga.startDate > date">
                                                            <p class="header-font">-</p>
                                                        </ng-container>
                                                    </ng-container>

                                                    <ng-container *ngIf="ga.penkaFormat === 'MEDIUM'">

                                                        <ng-container *ngIf="ga.startDate === date">
                                                            <ng-container *ngIf="ga.startTime <= time;">
                                                                <ng-container *ngIf="ga.winnerTeamId === ga.homeTeamId">
                                                                    <p class="header-font">L</p>
                                                                    <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="ga.winnerTeamId === ga.visitTeamId">
                                                                    <p class="header-font">V</p>
                                                                    <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                                </ng-container>
                                                                <ng-container *ngIf="ga.draw === true">
                                                                    <p class="header-font">E</p>
                                                                    <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-container *ngIf="ga.startDate < date; else noneDate">
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.homeTeamId">
                                                                <p class="header-font">L</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.visitTeamId">
                                                                <p class="header-font">V</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.draw === true">
                                                                <p class="header-font">E</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-template #noneDate>
                                                            <p class="header-font">-</p>
                                                        </ng-template>

                                                    </ng-container>
                                                </ng-template>

                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                        </mat-card-content>
                    </mat-card>

                </div>
            </div>
        </div>
    </div>
</div>
<!------------------------------>
<!-------- MOBILE -------------->
<div class="mobile">
    <br>
    <div class="container">
        <div class="row">
            <div class="col-xs-12">
                <div class="box">
                    <div class="card-mobile">
                        <!-- Header -->
                        <div class="header-mobile">
                            <ng-container *ngIf="gambles">
                                <ul class="header-table">
                                    <li class="header-participants">&nbsp;</li>
                                    <li class="header-scores">
                                        <p class="header-font">Puntos</p>
                                    </li>
                                    <li class="header-matches" *ngFor="let g of gambles | filterUserId:user.uid">
                                        <ng-container
                                            *ngFor="let sm of singleMatches | filterId:g.singleMatchId; let i = index">
                                            <ng-container *ngIf="i === 0">
                                                <p class="header-font">{{sm.homeTeamAlias}} &nbsp; -
                                                    &nbsp; {{sm.visitTeamAlias}}</p>
                                                <p class="score-font">{{sm.homeTeamScore}} &nbsp; -
                                                    &nbsp; {{sm.visitTeamScore}}</p>
                                            </ng-container>
                                        </ng-container>
                                    </li>
                                </ul>
                            </ng-container>
                        </div>

                        <!--- Body --->
                        <div class="body-mobile">
                            <ul class="list-participants">
                                <li class="item-participants"
                                    *ngFor="let part of participants; let i = index">

                                    <ng-container *ngIf="part.userId === user.uid; else other">
                                        <div class="container-participant">
                                            <p><span class="me">{{i + 1}}.&nbsp;{{part.userName}}</span></p>
                                        </div>
                                        <div class="container-score">
                                            <p><span class="me">{{part.accumulatedScore}} pt</span></p>
                                        </div>
                                    </ng-container>

                                    <ng-template #other>
                                        <div class="container-participant">
                                            <p>{{i + 1}}.&nbsp;{{part.userName}}</p>
                                        </div>
                                        <div class="container-score">
                                            <p>{{part.accumulatedScore}} pt</p>
                                        </div>
                                    </ng-template>

                                    <div>
                                        <ul class="list-gamble">
                                            <li class="item-gamble"
                                                *ngFor="let ga of gambles | filterUserId:part.userId; let x = index">

                                                <!-- My Gambles -->
                                                <ng-container *ngIf="ga.userId === user.uid; else guess">
                                                    <ng-container *ngIf="ga.penkaFormat === 'PRO'">

                                                        <ng-container *ngIf="ga.homeTeamScore; else noScoreYet">
                                                            <p class="header-font">{{ga.homeTeamScore}}
                                                                - {{ga.visitTeamScore}}</p>
                                                            <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                        </ng-container>

                                                        <ng-template #noScoreYet>
                                                            <p class="header-font">-</p>
                                                        </ng-template>
                                                    </ng-container>

                                                    <ng-container *ngIf="ga.penkaFormat === 'MEDIUM'">
                                                        <ng-container
                                                            *ngIf="ga.winnerTeamId || ga.draw; else noScoreYet">
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.homeTeamId">
                                                                <p class="header-font">L</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.visitTeamId">
                                                                <p class="header-font">V</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.draw === true">
                                                                <p class="header-font">E</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-template #noScoreYet>
                                                            <p class="header-font">-</p>
                                                        </ng-template>


                                                    </ng-container>
                                                </ng-container>

                                                <!-- Other Players Gambles -->
                                                <ng-template #guess>
                                                    <ng-container *ngIf="ga.penkaFormat === 'PRO'">

                                                        <ng-container *ngIf="ga.startDate === date">
                                                            <ng-container *ngIf="ga.startTime <= time;">
                                                                <p class="header-font">{{ga.homeTeamScore}}
                                                                    - {{ga.visitTeamScore}}</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.startTime > time;">
                                                                <p class="header-font">-</p>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-container *ngIf="ga.startDate < date">
                                                            <p class="header-font">{{ga.homeTeamScore}}
                                                                - {{ga.visitTeamScore}}</p>
                                                            <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                        </ng-container>

                                                        <ng-container *ngIf="ga.startDate > date">
                                                            <p class="header-font">-</p>
                                                        </ng-container>
                                                    </ng-container>

                                                    <ng-container *ngIf="ga.penkaFormat === 'MEDIUM'">

                                                        <ng-container *ngIf="ga.startDate === date">
                                                            <ng-container *ngIf="ga.startTime <= time;">
                                                                <ng-container *ngIf="ga.winnerTeamId === ga.homeTeamId">
                                                                    <p class="header-font">L</p>
                                                                    <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                                </ng-container>
                                                                <ng-container
                                                                    *ngIf="ga.winnerTeamId === ga.visitTeamId">
                                                                    <p class="header-font">V</p>
                                                                    <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                                </ng-container>
                                                                <ng-container *ngIf="ga.draw === true">
                                                                    <p class="header-font">E</p>
                                                                    <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                                </ng-container>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-container *ngIf="ga.startDate < date; else noneDate">
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.homeTeamId">
                                                                <p class="header-font">L</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.winnerTeamId === ga.visitTeamId">
                                                                <p class="header-font">V</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                            <ng-container *ngIf="ga.draw === true">
                                                                <p class="header-font">E</p>
                                                                <p class="score-achieved">{{ga.scoreAchieved}}&nbsp;puntos</p>
                                                            </ng-container>
                                                        </ng-container>

                                                        <ng-template #noneDate>
                                                            <p class="header-font">-</p>
                                                        </ng-template>

                                                    </ng-container>
                                                </ng-template>

                                            </li>
                                        </ul>
                                    </div>
                                </li>
                            </ul>
                        </div>

                    </div>

                </div>
            </div>
        </div>
    </div>
</div>